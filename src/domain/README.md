# 🏛️ Domain Layer

**비즈니스 도메인별 캡슐화된 기능 모듈 레이어**

## 🎯 역할과 책임

Domain 레이어는 **비즈니스 핵심 영역별로 격리된 기능**을 제공하는 레이어로, 다음과 같은 역할을 담당합니다:

- **도메인 모델링** - 비즈니스 개념과 규칙의 코드 표현
- **비즈니스 로직 캡슐화** - 도메인별 업무 규칙과 정책 구현
- **도메인 특화 UI** - 해당 영역에 최적화된 사용자 인터페이스
- **도메인 경계 관리** - 명확한 책임 분리와 인터페이스 정의

## 📦 레이어 구성 요소

### 각 도메인별 모듈 구조

#### `/types`
**목적**: 도메인 개념과 비즈니스 엔티티 모델링
- 핵심 비즈니스 엔티티 정의
- 도메인별 값 객체와 열거형
- 비즈니스 규칙이 반영된 타입 제약
- 도메인 간 인터페이스 계약

#### `/api`
**목적**: 도메인별 데이터 액세스 추상화
- RESTful API 호출 래핑
- 도메인 모델과 API 응답 간 변환
- 에러 처리와 재시도 로직
- 캐싱 전략과 최적화

#### `/hooks`
**목적**: 도메인별 상태 관리와 비즈니스 로직
- React Query 기반 서버 상태 관리
- 도메인별 비즈니스 규칙 구현
- 복합적인 상태 변화 오케스트레이션
- 사이드 이펙트 관리

#### `/components`
**목적**: 도메인에 특화된 UI 컴포넌트
- 비즈니스 개념을 반영한 UI 요소
- 도메인별 워크플로우 구현
- 복잡한 상호작용 패턴
- 도메인 전용 폼과 뷰

#### `/store` (선택적)
**목적**: 도메인별 클라이언트 상태 관리
- 복잡한 도메인 상태 관리
- 로컬 비즈니스 규칙 적용
- 옵티미스틱 업데이트
- 오프라인 상태 처리

#### `/utils`
**목적**: 도메인별 유틸리티와 헬퍼 함수
- 비즈니스 계산 및 변환 로직
- 도메인별 검증 규칙
- 포맷팅과 파싱 함수
- 도메인 특화 알고리즘

## 🔒 의존성 규칙

### ✅ 허용되는 의존성
- **하위 레이어**: Common, Global, Services, Shared
- **같은 도메인 내부**: 동일 도메인의 다른 모듈
- **상태 관리**: React Query, Zustand 등
- **도메인 라이브러리**: 비즈니스 로직 관련 특화 라이브러리

### ❌ 금지되는 의존성
- **상위 레이어**: Feature, Routes
- **다른 도메인**: 다른 도메인의 내부 구현 (Public API만 허용)
- **라우팅**: 페이지 네비게이션이나 URL 관리

## 🏗️ 권장 폴더 구조

```
src/domain/
├── [domain-name]/        # 각 비즈니스 도메인
│   ├── index.ts          # Public API 정의
│   ├── README.md         # 도메인별 가이드
│   ├── types/            # 도메인 타입과 모델
│   ├── api/              # 데이터 액세스
│   ├── hooks/            # 상태 관리와 비즈니스 로직
│   ├── components/       # 도메인 특화 UI
│   ├── store/            # 클라이언트 상태 (선택적)
│   ├── utils/            # 도메인 유틸리티
│   └── constants/        # 도메인 상수
└── README.md            # 도메인 레이어 가이드
```

## 📝 설계 원칙

### 도메인 주도 설계 (DDD)
- **유비쿼터스 언어**: 비즈니스와 개발팀이 공유하는 용어
- **경계된 컨텍스트**: 명확한 도메인 경계와 책임
- **집합체 패턴**: 관련된 엔티티들의 일관성 보장

### 캡슐화와 정보 은닉
- **Public API 패턴**: 외부에는 필요한 인터페이스만 노출
- **내부 구현 숨김**: 구현 세부사항의 변경이 외부에 영향 없음
- **명확한 계약**: 도메인 간 상호작용의 명시적 정의

### 비즈니스 로직 중심
- **핵심 로직 보호**: 외부 기술 변화에 영향받지 않는 비즈니스 규칙
- **도메인 무결성**: 비즈니스 규칙의 일관된 적용
- **테스트 가능성**: 비즈니스 로직의 독립적 검증

## ⚠️ 주의사항과 안티패턴

### 금지사항
1. **도메인 간 직접 의존성 금지**
   - 다른 도메인의 내부 구현 직접 import
   - 도메인 경계를 넘나드는 강한 결합

2. **기술적 관심사 침투 금지**
   - 특정 UI 프레임워크에 종속적인 로직
   - 인프라 기술의 도메인 로직 침투

3. **과도한 도메인 분할 금지**
   - 의미없는 작은 도메인 생성
   - 관련성 높은 개념들의 인위적 분리

### 올바른 도메인 경계
- **응집성**: 관련된 비즈니스 개념들의 그룹화
- **자율성**: 다른 도메인에 최소한의 의존성
- **명확성**: 도메인의 목적과 책임이 분명

## 🧪 품질 관리

### 테스트 전략
- **도메인 로직 테스트**: 비즈니스 규칙의 철저한 검증
- **통합 테스트**: API와 상태 관리의 연동 테스트
- **컴포넌트 테스트**: 도메인 UI의 시나리오 기반 테스트

### 도메인 모델 검증
- **유비쿼터스 언어 일관성**: 코드와 비즈니스 용어의 일치
- **비즈니스 규칙 완전성**: 모든 업무 규칙의 코드 반영
- **도메인 전문가 리뷰**: 비즈니스 이해관계자의 검증

## 🔄 도메인 간 상호작용

### 허용되는 상호작용 방식
1. **API 호출**: 다른 도메인의 Public API 사용
2. **이벤트 기반**: 도메인 이벤트를 통한 느슨한 결합
3. **공유 타입**: Shared 레이어의 공통 타입 활용

### 금지되는 상호작용
- 다른 도메인의 내부 구현 직접 접근
- 도메인 간 상태 공유
- 순환 의존성 생성

## 🎯 성공 기준

이 레이어가 성공적으로 설계되었다면:

1. **비즈니스 로직 집중**: 핵심 업무 규칙이 명확히 구현
2. **도메인 경계 명확**: 각 도메인의 책임과 범위가 분명
3. **변경 용이성**: 비즈니스 요구사항 변화에 유연한 대응
4. **테스트 가능성**: 비즈니스 로직의 독립적 검증 가능

이 레이어는 **비즈니스 가치 창출의 핵심**이 되어야 합니다.